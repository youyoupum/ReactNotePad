# React Router 基础概念 - 零基础入门 📚

> 专为完全不懂路由的初学者准备，用最简单的语言解释路由

---

## 第一部分：什么是路由？🤔

### 1. 日常生活中的类比

想象你在一个大商场里：
- **一楼**：手机专区 🏢
- **二楼**：服装专区 👕
- **三楼**：美食广场 🍔

当你按电梯按钮选择"3楼"时，电梯会把你带到美食广场。

**路由就是网站的"电梯系统"**：
- 输入网址 `www.example.com/food` → 显示美食页面
- 输入网址 `www.example.com/clothes` → 显示服装页面

### 2. 传统网站 vs React 单页应用

#### 传统网站（多页面）
```
┌─────────────────────────────────────┐
│  用户点击"关于我们"                 │
├─────────────────────────────────────┤
│  ↓                                  │
│  浏览器向服务器请求 about.html      │
│  ↓                                  │
│  服务器发送完整的新页面             │
│  ↓                                  │
│  整个页面刷新 💫                    │
└─────────────────────────────────────┘
```

**缺点**：
- ❌ 页面会闪一下（刷新）
- ❌ 重新加载所有 CSS、JS
- ❌ 用户体验不好

#### React 单页应用（SPA）
```
┌─────────────────────────────────────┐
│  用户点击"关于我们"                 │
├─────────────────────────────────────┤
│  ↓                                  │
│  React Router 拦截点击              │
│  ↓                                  │
│  只更新 URL (www.site.com/about)    │
│  ↓                                  │
│  只替换页面中变化的部分 ✨          │
│  ↓                                  │
│  页面不刷新！丝滑流畅 🎯            │
└─────────────────────────────────────┘
```

**优点**：
- ✅ 不刷新，体验流畅
- ✅ 只加载需要的内容
- ✅ 像手机 APP 一样的体验

---

## 第二部分：URL 的组成 🌐

理解 URL 结构很重要：

```
https://www.example.com/notes/123?sort=newest#comments
│      │   │           │   │    │   │          │       │
│      │   │           │   │    │   │          └─ 锚点（页面内定位）
│      │   │           │   │    │   └─ 查询参数
│      │   │           │   │    └─ 参数值
│      │   │           │   └─ 路径参数（动态）
│      │   │           └─ 路径
│      │   └─ 域名
│      └─ 协议
```

在我们的笔记应用中：
- `/` → 首页（笔记列表）
- `/notes/123` → 查看 ID=123 的笔记
- `/edit/456` → 编辑 ID=456 的笔记
- `/login` → 登录页
- `/profile` → 个人中心

---

## 第三部分：React Router 核心概念 🎯

### 1. BrowserRouter（路由容器）

**作用**：包裹整个应用，提供路由功能

```jsx
import { BrowserRouter } from 'react-router-dom';

function App() {
  return (
    <BrowserRouter>
      {/* 你的应用内容 */}
    </BrowserRouter>
  );
}
```

**理解**：
- 就像商场的"导航系统总开关"
- 没有它，路由功能都不工作
- 只需要在最外层用一次

### 2. Routes 和 Route（路由规则）

**作用**：定义"哪个网址显示哪个页面"

```jsx
import { Routes, Route } from 'react-router-dom';

<Routes>
  <Route path="/" element={<HomePage />} />
  <Route path="/about" element={<AboutPage />} />
  <Route path="/login" element={<LoginPage />} />
</Routes>
```

**理解**：
- `Routes`：路由规则的容器
- `Route`：一条规则
  - `path="/"` → 当访问首页时
  - `element={<HomePage />}` → 显示 HomePage 组件

### 3. Link（导航链接）

**作用**：创建链接，点击不刷新页面

```jsx
import { Link } from 'react-router-dom';

// ❌ 错误：会刷新页面
<a href="/about">关于我们</a>

// ✅ 正确：不会刷新
<Link to="/about">关于我们</Link>
```

**理解**：
- 类似 `<a>` 标签，但不刷新页面
- `to="/path"` 指定要跳转的路径

### 4. useNavigate（编程式导航）

**作用**：在代码中控制跳转

```jsx
import { useNavigate } from 'react-router-dom';

function MyComponent() {
  const navigate = useNavigate();
  
  const handleClick = () => {
    // 做一些操作（如保存数据）
    saveData();
    
    // 然后跳转页面
    navigate('/success');
  };
  
  return <button onClick={handleClick}>保存</button>;
}
```

**理解**：
- `Link` 用于直接点击的链接
- `navigate` 用于在函数中跳转（如表单提交后）

### 5. useParams（获取URL参数）

**作用**：获取 URL 中的动态部分

```jsx
// 路由定义
<Route path="/notes/:id" element={<NotePage />} />

// NotePage 组件中
import { useParams } from 'react-router-dom';

function NotePage() {
  const { id } = useParams();  // 获取 :id 的值
  
  // 如果访问 /notes/123，则 id = "123"
  console.log(id);  // "123"
  
  return <div>笔记ID: {id}</div>;
}
```

**理解**：
- `:id` 是占位符，可以匹配任何值
- `useParams()` 获取这个值
- ⚠️ 返回的是字符串，需要数字时用 `parseInt(id)`

---

## 第四部分：嵌套路由 🪆

### 概念

就像套娃一样，路由里面还有路由。

```
Layout（共享布局：导航栏 + 页脚）
├── HomePage
├── AboutPage
└── ProfilePage
```

所有页面都显示导航栏和页脚，但中间内容不同。

### 代码示例

```jsx
<Routes>
  {/* 父路由 */}
  <Route path="/" element={<Layout />}>
    {/* 子路由 */}
    <Route index element={<HomePage />} />
    <Route path="about" element={<AboutPage />} />
  </Route>
</Routes>

// Layout.jsx
function Layout() {
  return (
    <div>
      <nav>导航栏</nav>
      
      {/* 👇 子路由会在这里渲染 */}
      <Outlet />
      
      <footer>页脚</footer>
    </div>
  );
}
```

**理解**：
- `<Outlet />` 是子路由的"占位符"
- 访问 `/` 时，`<Outlet />` 显示 `<HomePage />`
- 访问 `/about` 时，`<Outlet />` 显示 `<AboutPage />`

---

## 第五部分：常见问题 ❓

### Q1: Link 和 navigate 什么时候用？

**Link**：用于直接在 JSX 中渲染链接
```jsx
<Link to="/about">关于我们</Link>
```

**navigate**：用于函数中的跳转
```jsx
const handleSubmit = () => {
  // 保存数据
  saveData();
  // 跳转
  navigate('/success');
};
```

### Q2: useParams 返回什么？

**返回字符串！**
```jsx
// URL: /notes/123
const { id } = useParams();
console.log(id);           // "123" (字符串)
console.log(typeof id);    // "string"

// 如果需要数字
const noteId = parseInt(id);  // 123 (数字)
```

### Q3: 为什么用 <Link> 不用 <a>？

```jsx
// ❌ <a> 会刷新整个页面
<a href="/about">关于</a>

// ✅ <Link> 只更新内容，不刷新
<Link to="/about">关于</Link>
```

### Q4: 什么是动态路由？

**动态路由**：路径中有可变的部分

```jsx
// 静态路由 - 路径固定
<Route path="/about" element={<AboutPage />} />

// 动态路由 - :id 可以是任何值
<Route path="/notes/:id" element={<NotePage />} />

// 可以匹配：
// /notes/1
// /notes/999
// /notes/abc
```

---

## 第六部分：学习路径建议 📝

### 第1天：基础概念
- ✅ 理解什么是路由
- ✅ 理解 URL 的结构
- ✅ 看懂 BrowserRouter、Routes、Route

### 第2天：导航
- ✅ 使用 Link 创建链接
- ✅ 使用 useNavigate 编程式跳转
- ✅ 练习在页面间跳转

### 第3天：动态路由
- ✅ 理解 `:参数` 的含义
- ✅ 使用 useParams 获取参数
- ✅ 实现详情页

### 第4天：嵌套路由
- ✅ 理解 Layout + Outlet
- ✅ 实现共享布局
- ✅ 理解路由层级

### 第5天：路由守卫
- ✅ 理解受保护的路由
- ✅ 实现登录检查
- ✅ 实现重定向

---

## 第七部分：下一步 🚀

阅读完本文档后，建议继续学习：

1. **📄 查看项目文件详解**：`docs/02-项目文件详解.md`
2. **💻 查看代码逐行注释**：`docs/03-代码逐行解释.md`
3. **🎯 查看实战练习**：`docs/04-实战练习.md`

---

**🎉 恭喜完成基础概念学习！**

记住：
- ✅ 路由 = 网站的导航系统
- ✅ Link = 不刷新的链接
- ✅ navigate = 在代码中跳转
- ✅ useParams = 获取 URL 参数
- ✅ Outlet = 子路由占位符

继续加油！💪
