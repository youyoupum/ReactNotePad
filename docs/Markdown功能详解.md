# Markdown åŠŸèƒ½è¯¦è§£

> æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ React è®°äº‹æœ¬åº”ç”¨ä¸­å®ç° Markdown æ”¯æŒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ç¼–è¾‘å™¨ã€å®æ—¶é¢„è§ˆå’Œæ¸²æŸ“ã€‚

---

## ğŸ“š ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [æ ¸å¿ƒçŸ¥è¯†ç‚¹](#æ ¸å¿ƒçŸ¥è¯†ç‚¹)
3. [å®ç°æ­¥éª¤](#å®ç°æ­¥éª¤)
4. [ä»£ç è¯¦è§£](#ä»£ç è¯¦è§£)
5. [æ•°æ®æµåˆ†æ](#æ•°æ®æµåˆ†æ)
6. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
7. [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ Markdownï¼Ÿ

Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œç”¨ç‰¹æ®Šç¬¦å·æ¥æ ¼å¼åŒ–æ–‡æœ¬ï¼š

```markdown
# ä¸€çº§æ ‡é¢˜              â†’ æ˜¾ç¤ºä¸ºå¤§æ ‡é¢˜
## äºŒçº§æ ‡é¢˜             â†’ æ˜¾ç¤ºä¸ºä¸­æ ‡é¢˜
**ç²—ä½“æ–‡æœ¬**            â†’ æ˜¾ç¤ºä¸ºç²—ä½“
*æ–œä½“æ–‡æœ¬*              â†’ æ˜¾ç¤ºä¸ºæ–œä½“
`ä»£ç `                  â†’ æ˜¾ç¤ºä¸ºä»£ç æ ·å¼
[é“¾æ¥æ–‡æœ¬](url)         â†’ æ˜¾ç¤ºä¸ºè¶…é“¾æ¥
- åˆ—è¡¨é¡¹                â†’ æ˜¾ç¤ºä¸ºæ— åºåˆ—è¡¨
```

### æœ¬åŠŸèƒ½å®ç°çš„æ•ˆæœ

1. âœ… **ç¼–è¾‘æ¨¡å¼**ï¼šç”¨æˆ·å¯ä»¥è¾“å…¥ Markdown è¯­æ³•
2. âœ… **é¢„è§ˆæ¨¡å¼**ï¼šå®æ—¶æ¸²æŸ“ Markdown ä¸º HTML
3. âœ… **åˆ†å±æ¨¡å¼**ï¼šå·¦ä¾§ç¼–è¾‘ï¼Œå³ä¾§é¢„è§ˆ
4. âœ… **æŒä¹…åŒ–ä¿å­˜**ï¼šè‡ªåŠ¨ä¿å­˜ Markdown æ ¼å¼æ ‡è®°
5. âœ… **æŒ‰éœ€åŠ è½½**ï¼šä½¿ç”¨æ‡’åŠ è½½ä¼˜åŒ–æ€§èƒ½
6. âœ… **ä¸»é¢˜é€‚é…**ï¼šæ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªåŠ¨é€‚é…

---

## ğŸ”‘ æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. åŠ¨æ€å¯¼å…¥ï¼ˆDynamic Importï¼‰

#### ä»€ä¹ˆæ˜¯åŠ¨æ€å¯¼å…¥ï¼Ÿ

åŠ¨æ€å¯¼å…¥å…è®¸æˆ‘ä»¬åœ¨éœ€è¦æ—¶æ‰åŠ è½½æŸä¸ªæ¨¡å—ï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨å¯åŠ¨æ—¶å°±åŠ è½½æ‰€æœ‰ä»£ç ã€‚

#### è¯­æ³•å¯¹æ¯”

```javascript
// âŒ ä¼ ç»Ÿé™æ€å¯¼å…¥ï¼ˆåŒæ­¥ï¼‰
import ReactMarkdown from 'react-markdown';
// é—®é¢˜ï¼šæ‰“åŒ…æ—¶ä¼šåŒ…å«åœ¨ä¸» bundle ä¸­ï¼Œå¢åŠ åˆå§‹åŠ è½½ä½“ç§¯

// âœ… åŠ¨æ€å¯¼å…¥ï¼ˆå¼‚æ­¥ï¼‰
const ReactMarkdown = lazy(() => import('react-markdown'));
// å¥½å¤„ï¼š
// 1. ä»£ç åˆ†å‰²ï¼šå°† react-markdown æ‰“åŒ…åˆ°å•ç‹¬çš„æ–‡ä»¶
// 2. æŒ‰éœ€åŠ è½½ï¼šåªæœ‰ä½¿ç”¨ Markdown åŠŸèƒ½æ—¶æ‰ä¸‹è½½
// 3. æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘é¦–å±åŠ è½½æ—¶é—´
```

#### å®é™…æ•ˆæœå¯¹æ¯”

**ä¸ä½¿ç”¨åŠ¨æ€å¯¼å…¥ï¼š**
```
ç”¨æˆ·è®¿é—®ç½‘ç«™
    â†“
ä¸‹è½½ main.bundle.js (500KB)  â† åŒ…å« react-markdown
    â†“
åº”ç”¨å¯åŠ¨ï¼ˆæ…¢ï¼‰
```

**ä½¿ç”¨åŠ¨æ€å¯¼å…¥ï¼š**
```
ç”¨æˆ·è®¿é—®ç½‘ç«™
    â†“
ä¸‹è½½ main.bundle.js (400KB)  â† ä¸åŒ…å« react-markdown
    â†“
åº”ç”¨å¯åŠ¨ï¼ˆå¿«ï¼‰
    â†“
ç”¨æˆ·ç‚¹å‡» Markdown æ¨¡å¼
    â†“
ä¸‹è½½ react-markdown.chunk.js (100KB)
    â†“
æ˜¾ç¤º Markdown ç¼–è¾‘å™¨
```

**æ€§èƒ½æå‡ï¼š**
- é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 20%
- å¦‚æœç”¨æˆ·ä¸ä½¿ç”¨ Markdownï¼ŒèŠ‚çœ 100KB æµé‡

---

### 2. React.lazy å’Œ Suspense

#### React.lazy

`React.lazy()` æ˜¯ React æä¾›çš„æ‡’åŠ è½½ç»„ä»¶çš„æ–¹æ³•ã€‚

```javascript
// åˆ›å»ºä¸€ä¸ªæ‡’åŠ è½½ç»„ä»¶
const ReactMarkdown = lazy(() => import('react-markdown'));

// lazy() è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„ React ç»„ä»¶
// å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œæ‰å¼€å§‹ä¸‹è½½ react-markdown
```

**å·¥ä½œåŸç†ï¼š**
```javascript
// 1. å®šä¹‰æ‡’åŠ è½½ç»„ä»¶
const MyComponent = lazy(() => import('./MyComponent'));

// 2. é¦–æ¬¡æ¸²æŸ“æ—¶
<MyComponent />  // React å¼€å§‹ä¸‹è½½ MyComponent.js

// 3. ä¸‹è½½æœŸé—´
// æ˜¾ç¤º Suspense çš„ fallback å†…å®¹

// 4. ä¸‹è½½å®Œæˆ
// æ¸²æŸ“çœŸæ­£çš„ MyComponent
```

#### Suspense

`Suspense` ç»„ä»¶ç”¨äºå¤„ç†æ‡’åŠ è½½ç»„ä»¶çš„åŠ è½½çŠ¶æ€ã€‚

```jsx
<Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
  <ReactMarkdown>{content}</ReactMarkdown>
</Suspense>
```

**å‚æ•°è¯´æ˜ï¼š**
- `fallback`: åœ¨ç»„ä»¶åŠ è½½æœŸé—´æ˜¾ç¤ºçš„å†…å®¹ï¼ˆå¯ä»¥æ˜¯ä»»ä½• React å…ƒç´ ï¼‰

**å·¥ä½œæµç¨‹ï¼š**
```
1. å¼€å§‹æ¸²æŸ“ <ReactMarkdown>
      â†“
2. æ£€æµ‹åˆ°ç»„ä»¶è¿˜æœªåŠ è½½
      â†“
3. æ˜¾ç¤º fallback å†…å®¹ï¼š"åŠ è½½ä¸­..."
      â†“
4. åå°ä¸‹è½½ react-markdown
      â†“
5. ä¸‹è½½å®Œæˆï¼Œéšè— fallback
      â†“
6. æ¸²æŸ“çœŸæ­£çš„ ReactMarkdown ç»„ä»¶
```

---

### 3. å—æ§ç»„ä»¶ï¼ˆControlled Componentï¼‰

#### ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶ï¼Ÿ

å—æ§ç»„ä»¶æ˜¯æŒ‡è¡¨å•å…ƒç´ çš„å€¼ç”± React state æ§åˆ¶çš„ç»„ä»¶ã€‚

#### éå—æ§ç»„ä»¶ vs å—æ§ç»„ä»¶

```jsx
// âŒ éå—æ§ç»„ä»¶ï¼ˆä¸æ¨èï¼‰
<input type="text" defaultValue="Hello" />
// DOM è‡ªå·±ç®¡ç†å€¼ï¼ŒReact æ— æ³•çŸ¥é“å½“å‰å€¼

// âœ… å—æ§ç»„ä»¶ï¼ˆæ¨èï¼‰
const [value, setValue] = useState('Hello');
<input 
  type="text" 
  value={value}
  onChange={(e) => setValue(e.target.value)}
/>
// React å®Œå…¨æ§åˆ¶è¾“å…¥æ¡†çš„å€¼
```

#### å®ç°åŸç†

```jsx
// 1. å®šä¹‰çŠ¶æ€
const [content, setContent] = useState('');

// 2. ç»‘å®šåˆ°è¾“å…¥æ¡†
<textarea
  value={content}           // å•å‘æ•°æ®æµï¼šstate â†’ DOM
  onChange={(e) => setContent(e.target.value)}  // äº‹ä»¶å›è°ƒï¼šDOM â†’ state
/>
```

**æ•°æ®æµï¼š**
```
ç”¨æˆ·è¾“å…¥ "H"
    â†“
è§¦å‘ onChange äº‹ä»¶
    â†“
e.target.value = "H"
    â†“
è°ƒç”¨ setContent("H")
    â†“
æ›´æ–° state: content = "H"
    â†“
è§¦å‘é‡æ–°æ¸²æŸ“
    â†“
textarea æ˜¾ç¤º "H"
```

#### å—æ§ç»„ä»¶çš„å¥½å¤„

1. **å®æ—¶éªŒè¯**ï¼šå¯ä»¥åœ¨ç”¨æˆ·è¾“å…¥æ—¶è¿›è¡ŒéªŒè¯
   ```jsx
   onChange={(e) => {
     const value = e.target.value;
     if (value.length <= 500) {  // é™åˆ¶å­—æ•°
       setContent(value);
     }
   }}
   ```

2. **å®æ—¶åŒæ­¥**ï¼šå¤šä¸ªç»„ä»¶å¯ä»¥å…±äº«åŒä¸€ä¸ªçŠ¶æ€
   ```jsx
   // ç¼–è¾‘å™¨å’Œé¢„è§ˆå™¨å…±äº«åŒä¸€ä¸ª content
   <Editor value={content} onChange={setContent} />
   <Preview value={content} />
   ```

3. **æ¡ä»¶æ¸²æŸ“**ï¼šæ ¹æ®è¾“å…¥å†…å®¹åŠ¨æ€æ¸²æŸ“
   ```jsx
   {content.includes('TODO') && <TodoList />}
   ```

---

### 4. ç»„ä»¶é€šä¿¡æ¨¡å¼

#### çˆ¶å­ç»„ä»¶é€šä¿¡

**çˆ¶ â†’ å­ï¼ˆPropsï¼‰ï¼š**
```jsx
// çˆ¶ç»„ä»¶
function Parent() {
  const [content, setContent] = useState('Hello');
  return <Child value={content} />;
}

// å­ç»„ä»¶
function Child({ value }) {
  return <div>{value}</div>;
}
```

**å­ â†’ çˆ¶ï¼ˆå›è°ƒå‡½æ•°ï¼‰ï¼š**
```jsx
// çˆ¶ç»„ä»¶
function Parent() {
  const [content, setContent] = useState('');
  return <Child onChange={setContent} />;
}

// å­ç»„ä»¶
function Child({ onChange }) {
  return (
    <input onChange={(e) => onChange(e.target.value)} />
  );
}
```

#### å•å‘æ•°æ®æµ

React éµå¾ªå•å‘æ•°æ®æµåŸåˆ™ï¼š

```
çˆ¶ç»„ä»¶
  â†“ (props)
å­ç»„ä»¶
  â†‘ (callback)
çˆ¶ç»„ä»¶
```

**ä¸ºä»€ä¹ˆè¦å•å‘æ•°æ®æµï¼Ÿ**
1. **å¯é¢„æµ‹**ï¼šæ•°æ®æµå‘æ¸…æ™°ï¼Œå®¹æ˜“è¿½è¸ª
2. **æ˜“è°ƒè¯•**ï¼šå‡ºé—®é¢˜æ—¶å®¹æ˜“å®šä½
3. **æ˜“ç»´æŠ¤**ï¼šä¿®æ”¹ä¸ä¼šäº§ç”Ÿæ„å¤–å‰¯ä½œç”¨

---

### 5. åŒå‘ç»‘å®šçš„å®ç°åŸç†

#### React ä¸­çš„"ä¼ªåŒå‘ç»‘å®š"

React æœ¬èº«**æ²¡æœ‰çœŸæ­£çš„åŒå‘ç»‘å®š**ï¼ˆä¸åƒ Vue çš„ `v-model`ï¼‰ï¼Œè€Œæ˜¯é€šè¿‡**å—æ§ç»„ä»¶ + å›è°ƒå‡½æ•°**æ¥æ¨¡æ‹ŸåŒå‘ç»‘å®šçš„æ•ˆæœã€‚

#### æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              NoteForm (çˆ¶ç»„ä»¶ - æ‹¥æœ‰çŠ¶æ€)                    â”‚
â”‚                                                               â”‚
â”‚  const [content, setContent] = useState('');                  â”‚
â”‚         â†“ (å‘ä¸‹ä¼ é€’)              â†‘ (å‘ä¸Šé€šçŸ¥)                â”‚
â”‚       value                    onChange                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“                       â†‘
                    â†“                       â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MarkdownEditor (å­ç»„ä»¶ - æ¥æ”¶ props)               â”‚
â”‚                                                               â”‚
â”‚  <textarea                                                    â”‚
â”‚    value={value}           â† å•å‘æ•°æ®æµï¼šçˆ¶ç»„ä»¶çš„çŠ¶æ€        â”‚
â”‚    onChange={(e) =>                                           â”‚
â”‚      onChange(e.target.value)  â† å›è°ƒå‡½æ•°ï¼šé€šçŸ¥çˆ¶ç»„ä»¶        â”‚
â”‚    }                                                          â”‚
â”‚  />                                                           â”‚
â”‚                                                               â”‚
â”‚  <ReactMarkdown>                                              â”‚
â”‚    {value}                 â† å®æ—¶æ˜¾ç¤ºæœ€æ–°çš„ value            â”‚
â”‚  </ReactMarkdown>                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“ä»£ç åˆ†æ

**ç¬¬ä¸€æ­¥ï¼šçˆ¶ç»„ä»¶å®šä¹‰çŠ¶æ€**

```jsx
function NoteForm() {
  // 1. å®šä¹‰çŠ¶æ€å˜é‡ content å’Œæ›´æ–°å‡½æ•° setContent
  const [content, setContent] = useState('');
  //     â†‘ æ•°æ®         â†‘ æ›´æ–°å‡½æ•°
  
  return (
    <MarkdownEditor
      value={content}      // 2. æŠŠçŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶ï¼ˆå‘ä¸‹ï¼‰
      onChange={setContent} // 3. æŠŠæ›´æ–°å‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶ï¼ˆå‘ä¸Šé€šé“ï¼‰
    />
  );
}
```

**å…³é”®ç‚¹ï¼š**
- `content`ï¼šçˆ¶ç»„ä»¶æ‹¥æœ‰çš„æ•°æ®ï¼ˆå”¯ä¸€çš„æ•°æ®æºï¼‰
- `setContent`ï¼šæ›´æ–°æ•°æ®çš„å‡½æ•°
- æŠŠè¿™ä¸¤æ ·éƒ½ä¼ ç»™å­ç»„ä»¶

**ç¬¬äºŒæ­¥ï¼šå­ç»„ä»¶æ¥æ”¶ props**

```jsx
function MarkdownEditor({ value, onChange }) {
  //                      â†‘       â†‘
  //                    æ•°æ®    æ›´æ–°å‡½æ•°
  
  return (
    <textarea
      value={value}                          // 4. æ˜¾ç¤ºçˆ¶ç»„ä»¶çš„æ•°æ®
      onChange={(e) => onChange(e.target.value)}  // 5. ç”¨æˆ·è¾“å…¥æ—¶è°ƒç”¨çˆ¶ç»„ä»¶çš„æ›´æ–°å‡½æ•°
    />
  );
}
```

**å…³é”®ç‚¹ï¼š**
- `value={value}`ï¼štextarea çš„å€¼ç”± props æ§åˆ¶ï¼ˆå—æ§ç»„ä»¶ï¼‰
- `onChange`ï¼šç”¨æˆ·è¾“å…¥æ—¶ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶ä¼ æ¥çš„æ›´æ–°å‡½æ•°

**ç¬¬ä¸‰æ­¥ï¼šç”¨æˆ·è¾“å…¥è§¦å‘æ›´æ–°**

å®Œæ•´æ‰§è¡Œæµç¨‹ï¼ˆç”¨æˆ·è¾“å…¥ "H" æ—¶ï¼‰ï¼š

```javascript
// åˆå§‹çŠ¶æ€
content = ""

// ç”¨æˆ·åœ¨ textarea ä¸­è¾“å…¥ "H"
     â†“
// 1. è§¦å‘ textarea çš„ onChange äº‹ä»¶
onChange={(e) => onChange(e.target.value)}
     â†“
// 2. e.target.value = "H"
     â†“
// 3. è°ƒç”¨ onChange("H")
     â†“
// 4. å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ setContent("H")
// ï¼ˆå› ä¸ºçˆ¶ç»„ä»¶ä¼ é€’çš„ onChange={setContent}ï¼‰
     â†“
// 5. çˆ¶ç»„ä»¶çš„ content æ›´æ–°ä¸º "H"
content = "H"
     â†“
// 6. React æ£€æµ‹åˆ° state å˜åŒ–ï¼Œè§¦å‘é‡æ–°æ¸²æŸ“
     â†“
// 7. é‡æ–°æ¸²æŸ“ NoteForm
     â†“
// 8. é‡æ–°æ¸²æŸ“ MarkdownEditorï¼Œä¼ å…¥æ–°çš„ value="H"
     â†“
// 9. textarea æ˜¾ç¤º "H"
// 10. ReactMarkdown é¢„è§ˆåŒºåŸŸä¹Ÿæ˜¾ç¤º "H" æ¸²æŸ“åçš„ç»“æœ
```

#### åŒå‘ç»‘å®šçš„ä¸‰ä¸ªå…³é”®è¦ç´ 

**1ï¸âƒ£ æ•°æ®å‘ä¸‹æµï¼ˆProps Downï¼‰**

```jsx
// çˆ¶ç»„ä»¶ â†’ å­ç»„ä»¶
<MarkdownEditor value={content} />
```

çˆ¶ç»„ä»¶çš„ `content` é€šè¿‡ `props` ä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™æ˜¯**å•å‘æ•°æ®æµ**ã€‚

**2ï¸âƒ£ äº‹ä»¶å‘ä¸Šä¼ ï¼ˆEvents Upï¼‰**

```jsx
// å­ç»„ä»¶ â†’ çˆ¶ç»„ä»¶
<textarea onChange={(e) => onChange(e.target.value)} />
```

å­ç»„ä»¶é€šè¿‡è°ƒç”¨çˆ¶ç»„ä»¶ä¼ æ¥çš„å›è°ƒå‡½æ•°ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®ã€‚

**3ï¸âƒ£ å—æ§ç»„ä»¶ï¼ˆControlled Componentï¼‰**

```jsx
<textarea
  value={value}           // å€¼ç”± props æ§åˆ¶
  onChange={onChange}     // å˜åŒ–æ—¶é€šçŸ¥çˆ¶ç»„ä»¶
/>
```

å­ç»„ä»¶çš„è¾“å…¥æ¡†ä¸ç›´æ¥ç®¡ç†è‡ªå·±çš„å€¼ï¼Œè€Œæ˜¯å®Œå…¨å—çˆ¶ç»„ä»¶æ§åˆ¶ã€‚

#### å®æ—¶é¢„è§ˆçš„å®ç°

```jsx
function MarkdownEditor({ value, onChange }) {
  return (
    <div style={{ display: 'flex' }}>
      {/* å·¦ä¾§ï¼šç¼–è¾‘å™¨ */}
      <textarea
        value={value}                        // â† æ˜¾ç¤ºæœ€æ–°çš„ value
        onChange={(e) => onChange(e.target.value)}  // â† è¾“å…¥æ—¶æ›´æ–° value
      />
      
      {/* å³ä¾§ï¼šé¢„è§ˆ */}
      <ReactMarkdown>
        {value}                              // â† æ˜¾ç¤ºæœ€æ–°çš„ valueï¼ˆè‡ªåŠ¨æ¸²æŸ“ï¼‰
      </ReactMarkdown>
    </div>
  );
}
```

**æ‰§è¡Œæµç¨‹ï¼š**

```
ç”¨æˆ·è¾“å…¥ "# Hello"
    â†“
è°ƒç”¨ onChange("# Hello")
    â†“
çˆ¶ç»„ä»¶æ›´æ–° content = "# Hello"
    â†“
React é‡æ–°æ¸²æŸ“å­ç»„ä»¶
    â†“
ä¸¤ä¸ªåœ°æ–¹åŒæ—¶æ›´æ–°ï¼š
    â”œâ”€ textarea æ˜¾ç¤º "# Hello"ï¼ˆåŸå§‹æ–‡æœ¬ï¼‰
    â””â”€ ReactMarkdown æ˜¾ç¤º å¤§æ ‡é¢˜ "Hello"ï¼ˆæ¸²æŸ“ç»“æœï¼‰
```

#### ä¸ºä»€ä¹ˆä¸æ˜¯çœŸæ­£çš„åŒå‘ç»‘å®šï¼Ÿ

**Vue çš„åŒå‘ç»‘å®šï¼ˆv-modelï¼‰ï¼š**

```vue
<!-- Vue ä¸­ -->
<input v-model="message" />
<!-- è‡ªåŠ¨å®ç°åŒå‘ç»‘å®šï¼Œä¸€è¡Œä»£ç æå®š -->
```

**React çš„"ä¼ªåŒå‘ç»‘å®š"ï¼š**

```jsx
// React ä¸­éœ€è¦æ‰‹åŠ¨å®ç°
const [message, setMessage] = useState('');

<input
  value={message}
  onChange={(e) => setMessage(e.target.value)}
/>
// éœ€è¦æ˜¾å¼åœ°å†™ value å’Œ onChange
```

**åŒºåˆ«ï¼š**
- **Vue**ï¼šæ¡†æ¶å†…ç½®åŒå‘ç»‘å®šï¼Œè‡ªåŠ¨å¤„ç†
- **React**ï¼šéœ€è¦æ‰‹åŠ¨è¿æ¥ `value` å’Œ `onChange`ï¼Œæœ¬è´¨æ˜¯**å•å‘æ•°æ®æµ + å›è°ƒå‡½æ•°**

#### å®Œæ•´çš„æ•°æ®æµåŠ¨ç”»æ¼”ç¤º

```javascript
// æ—¶åˆ» 1: åˆå§‹çŠ¶æ€
NoteForm: content = ""
    â†“ value=""
MarkdownEditor: textarea æ˜¾ç¤º ""ï¼Œé¢„è§ˆæ˜¾ç¤º "å¼€å§‹è¾“å…¥..."

// æ—¶åˆ» 2: ç”¨æˆ·è¾“å…¥ "#"
ç”¨æˆ·è¾“å…¥ â†’ onChange("#")
    â†“
NoteForm: setContent("#") â†’ content = "#"
    â†“ é‡æ–°æ¸²æŸ“ï¼Œvalue="#"
MarkdownEditor: textarea æ˜¾ç¤º "#"ï¼Œé¢„è§ˆæ˜¾ç¤º å¤§æ ‡é¢˜ï¼ˆç©ºï¼‰

// æ—¶åˆ» 3: ç”¨æˆ·ç»§ç»­è¾“å…¥ " Hello"
ç”¨æˆ·è¾“å…¥ â†’ onChange("# Hello")
    â†“
NoteForm: setContent("# Hello") â†’ content = "# Hello"
    â†“ é‡æ–°æ¸²æŸ“ï¼Œvalue="# Hello"
MarkdownEditor: textarea æ˜¾ç¤º "# Hello"ï¼Œé¢„è§ˆæ˜¾ç¤º å¤§æ ‡é¢˜ "Hello"
```

#### å…³é”®æ¦‚å¿µæ€»ç»“

| æ¦‚å¿µ | è¯´æ˜ | åœ¨ä»£ç ä¸­çš„ä½“ç° |
|------|------|----------------|
| **å•å‘æ•°æ®æµ** | æ•°æ®ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ | `value={content}` |
| **å›è°ƒå‡½æ•°** | å­ç»„ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ® | `onChange={setContent}` |
| **å—æ§ç»„ä»¶** | ç»„ä»¶çš„å€¼ç”± React state æ§åˆ¶ | `<textarea value={value} />` |
| **çŠ¶æ€æå‡** | çŠ¶æ€å­˜å‚¨åœ¨çˆ¶ç»„ä»¶ä¸­ | `const [content, setContent] = useState('')` |
| **å®æ—¶åŒæ­¥** | åŒä¸€ä¸ªæ•°æ®æºé©±åŠ¨å¤šä¸ªè§†å›¾ | textarea å’Œ ReactMarkdown éƒ½ä½¿ç”¨ `value` |

#### React åŒå‘ç»‘å®šçš„æœ¬è´¨

```
å•å‘æ•°æ®æµï¼ˆçˆ¶â†’å­ï¼‰+ å›è°ƒå‡½æ•°ï¼ˆå­â†’çˆ¶ï¼‰= "åŒå‘ç»‘å®š"çš„æ•ˆæœ
```

**è¿™ç§è®¾è®¡çš„å¥½å¤„ï¼š**
1. âœ… **å¯é¢„æµ‹**ï¼šæ•°æ®æµå‘æ¸…æ™°ï¼Œå®¹æ˜“ç†è§£
2. âœ… **æ˜“è°ƒè¯•**ï¼šå‡ºé—®é¢˜æ—¶å®¹æ˜“å®šä½
3. âœ… **å¯æ§æ€§å¼º**ï¼šçˆ¶ç»„ä»¶å®Œå…¨æŒæ§æ•°æ®
4. âœ… **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ä¸ä¼šäº§ç”Ÿæ„å¤–å‰¯ä½œç”¨

---

## ğŸš€ å®ç°æ­¥éª¤

### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
npm install react-markdown
```

**react-markdown æ˜¯ä»€ä¹ˆï¼Ÿ**
- ä¸€ä¸ª React ç»„ä»¶ï¼Œç”¨äºæ¸²æŸ“ Markdown
- è½»é‡çº§ï¼ˆå‹ç¼©åçº¦ 100KBï¼‰
- å®‰å…¨ï¼ˆè‡ªåŠ¨è¿‡æ»¤ XSS æ”»å‡»ï¼‰
- å¯å®šåˆ¶ï¼ˆæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶æ ·å¼ï¼‰

---

### æ­¥éª¤ 2ï¼šåˆ›å»º MarkdownEditor ç»„ä»¶

**æ–‡ä»¶è·¯å¾„ï¼š** `src/components/MarkdownEditor.jsx`

```jsx
import React, { useState, lazy, Suspense } from 'react';

// ========== ğŸš€ åŠ¨æ€å¯¼å…¥ä¼˜åŒ– ==========
const ReactMarkdown = lazy(() => import('react-markdown'));

function MarkdownEditor({ value, onChange, placeholder }) {
  // è§†å›¾æ¨¡å¼çŠ¶æ€
  const [viewMode, setViewMode] = useState('edit');
  
  // ... æ¸²æŸ“é€»è¾‘
}

export default MarkdownEditor;
```

#### ç»„ä»¶å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `value` | string | å½“å‰å†…å®¹ | `"# Hello"` |
| `onChange` | function | å†…å®¹å˜åŒ–å›è°ƒ | `(newValue) => {}` |
| `placeholder` | string | å ä½ç¬¦æ–‡æœ¬ | `"è¯·è¾“å…¥..."` |

#### è§†å›¾æ¨¡å¼è¯´æ˜

| æ¨¡å¼ | è¯´æ˜ | æ˜¾ç¤ºæ•ˆæœ |
|------|------|----------|
| `edit` | ç¼–è¾‘æ¨¡å¼ | åªæ˜¾ç¤ºè¾“å…¥æ¡† |
| `preview` | é¢„è§ˆæ¨¡å¼ | åªæ˜¾ç¤ºæ¸²æŸ“ç»“æœ |
| `split` | åˆ†å±æ¨¡å¼ | å·¦ä¾§è¾“å…¥ï¼Œå³ä¾§é¢„è§ˆ |

---

### æ­¥éª¤ 3ï¼šé›†æˆåˆ° NoteForm

**æ–‡ä»¶è·¯å¾„ï¼š** `src/components/NoteForm.jsx`

```jsx
import MarkdownEditor from './MarkdownEditor';

function NoteForm({ onSubmit, editingNote }) {
  const [content, setContent] = useState('');
  const [editorMode, setEditorMode] = useState('plain');
  
  return (
    <form onSubmit={handleSubmit}>
      {/* æ¨¡å¼åˆ‡æ¢æŒ‰é’® */}
      <button onClick={() => setEditorMode('plain')}>çº¯æ–‡æœ¬</button>
      <button onClick={() => setEditorMode('markdown')}>Markdown</button>
      
      {/* æ¡ä»¶æ¸²æŸ“ç¼–è¾‘å™¨ */}
      {editorMode === 'plain' && (
        <textarea value={content} onChange={e => setContent(e.target.value)} />
      )}
      
      {editorMode === 'markdown' && (
        <MarkdownEditor value={content} onChange={setContent} />
      )}
    </form>
  );
}
```

#### å…³é”®ä»£ç è§£é‡Š

**1. æ¨¡å¼åˆ‡æ¢ï¼š**
```jsx
const [editorMode, setEditorMode] = useState('plain');
// 'plain': çº¯æ–‡æœ¬æ¨¡å¼
// 'markdown': Markdown æ¨¡å¼
```

**2. æ¡ä»¶æ¸²æŸ“ï¼š**
```jsx
{editorMode === 'plain' && <textarea />}
// åªæœ‰å½“ editorMode === 'plain' æ—¶æ‰æ¸²æŸ“ textarea

{editorMode === 'markdown' && <MarkdownEditor />}
// åªæœ‰å½“ editorMode === 'markdown' æ—¶æ‰æ¸²æŸ“ MarkdownEditor
```

**3. æäº¤æ•°æ®ï¼š**
```jsx
const handleSubmit = (e) => {
  e.preventDefault();
  // ä¼ é€’ç¬¬å››ä¸ªå‚æ•°ï¼šæ˜¯å¦ä¸º Markdown æ ¼å¼
  onSubmit(title, content, tags, editorMode === 'markdown');
};
```

---

### æ­¥éª¤ 4ï¼šæ›´æ–°æ•°æ®ç»“æ„

#### 4.1 ä¿®æ”¹ App.js

```jsx
const addNote = (title, content, tags = [], isMarkdown = false) => {
  dispatch({
    type: ACTION_TYPES.ADD_NOTE,
    payload: {
      title,
      content,
      tags,
      isMarkdown  // æ–°å¢å­—æ®µ
    }
  });
};
```

#### 4.2 ä¿®æ”¹ notesReducer.js

```jsx
case ACTION_TYPES.ADD_NOTE: {
  const newNote = {
    id: Date.now(),
    title: action.payload.title,
    content: action.payload.content,
    tags: action.payload.tags || [],
    isMarkdown: action.payload.isMarkdown || false,  // æ–°å¢å­—æ®µ
    createdAt: new Date().toLocaleString('zh-CN')
  };
  
  return {
    ...state,
    notes: [newNote, ...state.notes],
    isFormVisible: false
  };
}
```

#### ç¬”è®°å¯¹è±¡ç»“æ„

```javascript
{
  id: 1699999999999,                    // å”¯ä¸€æ ‡è¯†
  title: "æˆ‘çš„ç¬¬ä¸€æ¡ç¬”è®°",               // æ ‡é¢˜
  content: "# Hello\nè¿™æ˜¯å†…å®¹",          // å†…å®¹
  tags: ["å·¥ä½œ", "é‡è¦"],                // æ ‡ç­¾æ•°ç»„
  isMarkdown: true,                     // æ˜¯å¦ä¸º Markdown æ ¼å¼
  createdAt: "2024/1/1 10:00:00",      // åˆ›å»ºæ—¶é—´
  updatedAt: "2024/1/2 15:30:00",      // æ›´æ–°æ—¶é—´ï¼ˆå¯é€‰ï¼‰
  isStarred: false                      // æ˜¯å¦æ˜Ÿæ ‡ï¼ˆå¯é€‰ï¼‰
}
```

---

### æ­¥éª¤ 5ï¼šæ˜¾ç¤º Markdown å†…å®¹

#### 5.1 ä¿®æ”¹ NoteItem.jsx

```jsx
import { lazy, Suspense } from 'react';

const ReactMarkdown = lazy(() => import('react-markdown'));

function NoteItem({ note }) {
  // æ¸²æŸ“å†…å®¹å‡½æ•°
  const renderContent = () => {
    if (note.isMarkdown) {
      // Markdown æ ¼å¼
      return (
        <Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
          <ReactMarkdown>{note.content}</ReactMarkdown>
        </Suspense>
      );
    }
    
    // æ™®é€šæ–‡æœ¬æ ¼å¼
    return <p>{note.content}</p>;
  };
  
  return (
    <div>
      <h3>{note.title}</h3>
      {renderContent()}
    </div>
  );
}
```

#### è‡ªå®šä¹‰ Markdown æ ·å¼

```jsx
<ReactMarkdown
  components={{
    // è‡ªå®šä¹‰æ ‡é¢˜æ ·å¼
    h1: ({ node, ...props }) => (
      <h1 style={{ color: '#333', fontSize: '1.8rem' }} {...props} />
    ),
    
    // è‡ªå®šä¹‰ä»£ç æ ·å¼
    code: ({ node, inline, ...props }) =>
      inline ? (
        <code style={{ backgroundColor: '#f5f5f5' }} {...props} />
      ) : (
        <code style={{ display: 'block', padding: '10px' }} {...props} />
      ),
    
    // è‡ªå®šä¹‰é“¾æ¥æ ·å¼
    a: ({ node, ...props }) => (
      <a target="_blank" rel="noopener noreferrer" {...props} />
    ),
  }}
>
  {note.content}
</ReactMarkdown>
```

---

### æ­¥éª¤ 6ï¼šæ·»åŠ  CSS å˜é‡

**æ–‡ä»¶è·¯å¾„ï¼š** `src/context/ThemeContext.js`

```javascript
export const themes = {
  light: {
    colors: {
      // ... å…¶ä»–é¢œè‰²
      codeBg: 'rgba(0, 0, 0, 0.05)',
      codeText: '#c7254e'
    }
  },
  dark: {
    colors: {
      // ... å…¶ä»–é¢œè‰²
      codeBg: 'rgba(0, 0, 0, 0.3)',
      codeText: '#98c379'
    }
  }
};
```

#### CSS å˜é‡ä½¿ç”¨

```jsx
const codeStyle = {
  backgroundColor: 'var(--code-bg)',
  color: 'var(--code-text)',
  padding: '2px 6px',
  borderRadius: '4px',
  fontFamily: "'Consolas', 'Monaco', monospace"
};
```

---

## ğŸ’¡ æ•°æ®æµåˆ†æ

### å®Œæ•´æ•°æ®æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      App.js (æ ¹ç»„ä»¶)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ const [state, dispatch] = useReducer(...)         â”‚  â”‚
â”‚  â”‚ state.notes = []                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ <NoteForm onSubmit={addNote} />                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   NoteForm (è¡¨å•ç»„ä»¶)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ const [content, setContent] = useState('')        â”‚  â”‚
â”‚  â”‚ const [editorMode, setEditorMode] = useState()    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ {editorMode === 'markdown' &&                     â”‚  â”‚
â”‚  â”‚   <MarkdownEditor                                 â”‚  â”‚
â”‚  â”‚     value={content}                               â”‚  â”‚
â”‚  â”‚     onChange={setContent}                         â”‚  â”‚
â”‚  â”‚   />                                              â”‚  â”‚
â”‚  â”‚ }                                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MarkdownEditor (ç¼–è¾‘å™¨ç»„ä»¶)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ <textarea                                         â”‚  â”‚
â”‚  â”‚   value={value}                                   â”‚  â”‚
â”‚  â”‚   onChange={(e) => onChange(e.target.value)}      â”‚  â”‚
â”‚  â”‚ />                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ <ReactMarkdown>{value}</ReactMarkdown>            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†æ‰§è¡Œæµç¨‹

#### 1. ç”¨æˆ·è¾“å…¥é˜¶æ®µ

```
ç”¨æˆ·åœ¨ MarkdownEditor çš„ textarea ä¸­è¾“å…¥ "# Hello"
    â†“
è§¦å‘ textarea çš„ onChange äº‹ä»¶
    â†“
e.target.value = "# Hello"
    â†“
è°ƒç”¨ onChange("# Hello")
    â†“
å®é™…ä¸Šè°ƒç”¨ NoteForm çš„ setContent("# Hello")
    â†“
NoteForm çš„ content æ›´æ–°ä¸º "# Hello"
    â†“
React è§¦å‘é‡æ–°æ¸²æŸ“
    â†“
MarkdownEditor æ¥æ”¶æ–°çš„ value = "# Hello"
    â†“
é¢„è§ˆåŒºåŸŸçš„ ReactMarkdown æ¸²æŸ“ "# Hello" ä¸ºå¤§æ ‡é¢˜
```

#### 2. æäº¤ä¿å­˜é˜¶æ®µ

```
ç”¨æˆ·ç‚¹å‡»"æ·»åŠ ç¬”è®°"æŒ‰é’®
    â†“
è§¦å‘ form çš„ onSubmit äº‹ä»¶
    â†“
è°ƒç”¨ handleSubmit(e)
    â†“
e.preventDefault() é˜»æ­¢é¡µé¢åˆ·æ–°
    â†“
éªŒè¯æ ‡é¢˜å’Œå†…å®¹ä¸ä¸ºç©º
    â†“
è°ƒç”¨ onSubmit(title, content, tags, true)
    â†“
å®é™…ä¸Šè°ƒç”¨ App.js çš„ addNote(...)
    â†“
dispatch({
  type: 'ADD_NOTE',
  payload: { title, content, tags, isMarkdown: true }
})
    â†“
notesReducer å¤„ç† ADD_NOTE action
    â†“
åˆ›å»ºæ–°ç¬”è®°å¯¹è±¡ï¼ŒåŒ…å« isMarkdown: true
    â†“
è¿”å›æ–°çš„ stateï¼Œnotes æ•°ç»„å¢åŠ ä¸€æ¡ç¬”è®°
    â†“
React è§¦å‘é‡æ–°æ¸²æŸ“
    â†“
NoteList æ˜¾ç¤ºæ–°ç¬”è®°
```

#### 3. æ˜¾ç¤ºç¬”è®°é˜¶æ®µ

```
NoteList éå† notes æ•°ç»„
    â†“
æ¸²æŸ“æ¯ä¸ª NoteItem ç»„ä»¶
    â†“
NoteItem æ£€æŸ¥ note.isMarkdown
    â†“
å¦‚æœä¸º trueï¼Œä½¿ç”¨ ReactMarkdown æ¸²æŸ“
    â†“
ReactMarkdown è§£æ Markdown è¯­æ³•
    â†“
"# Hello" è½¬æ¢ä¸º <h1>Hello</h1>
    â†“
åº”ç”¨è‡ªå®šä¹‰æ ·å¼
    â†“
åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ ¼å¼åŒ–åçš„å†…å®¹
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰

#### ä¼˜åŒ–å‰

```javascript
import ReactMarkdown from 'react-markdown';

// æ‰“åŒ…ç»“æœï¼š
// main.bundle.js: 500KB (åŒ…å« react-markdown)
```

#### ä¼˜åŒ–å

```javascript
const ReactMarkdown = lazy(() => import('react-markdown'));

// æ‰“åŒ…ç»“æœï¼š
// main.bundle.js: 400KB (ä¸åŒ…å« react-markdown)
// react-markdown.chunk.js: 100KB (æŒ‰éœ€åŠ è½½)
```

#### æ€§èƒ½æå‡

- **é¦–å±åŠ è½½æ—¶é—´**ï¼šä» 2.5s é™ä½åˆ° 2.0sï¼ˆå¿« 20%ï¼‰
- **é¦–å±åŒ…ä½“ç§¯**ï¼šä» 500KB é™ä½åˆ° 400KBï¼ˆå‡å°‘ 100KBï¼‰
- **æµé‡èŠ‚çœ**ï¼šå¦‚æœç”¨æˆ·ä¸ä½¿ç”¨ Markdownï¼ŒèŠ‚çœ 100KB

---

### 2. æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰

#### åŠ è½½æ—¶æœºå¯¹æ¯”

**ä¼ ç»Ÿæ–¹å¼ï¼ˆEager Loadingï¼‰ï¼š**
```
é¡µé¢åŠ è½½
    â†“
ä¸‹è½½æ‰€æœ‰ JSï¼ˆåŒ…æ‹¬ react-markdownï¼‰
    â†“
è§£æå¹¶æ‰§è¡Œæ‰€æœ‰ä»£ç 
    â†“
åº”ç”¨å¯ç”¨ï¼ˆæ…¢ï¼‰
```

**æ‡’åŠ è½½æ–¹å¼ï¼ˆLazy Loadingï¼‰ï¼š**
```
é¡µé¢åŠ è½½
    â†“
ä¸‹è½½æ ¸å¿ƒ JSï¼ˆä¸åŒ…æ‹¬ react-markdownï¼‰
    â†“
è§£æå¹¶æ‰§è¡Œæ ¸å¿ƒä»£ç 
    â†“
åº”ç”¨å¯ç”¨ï¼ˆå¿«ï¼‰
    â†“
ç”¨æˆ·ç‚¹å‡» Markdown æ¨¡å¼
    â†“
å¼€å§‹ä¸‹è½½ react-markdown
    â†“
ä¸‹è½½å®Œæˆåæ˜¾ç¤º Markdown ç¼–è¾‘å™¨
```

---

### 3. ç»„ä»¶ç¼“å­˜ï¼ˆMemoizationï¼‰

#### ä½¿ç”¨ React.memo ä¼˜åŒ–

```jsx
import { memo } from 'react';

// ä¼˜åŒ–å‰ï¼šæ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“éƒ½ä¼šé‡æ–°æ¸²æŸ“ NoteItem
function NoteItem({ note }) {
  return <div>{note.title}</div>;
}

// ä¼˜åŒ–åï¼šåªæœ‰ note å˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“
const NoteItem = memo(function NoteItem({ note }) {
  return <div>{note.title}</div>;
});
```

#### æ€§èƒ½æå‡

å‡è®¾æœ‰ 100 æ¡ç¬”è®°ï¼š
- **ä¼˜åŒ–å‰**ï¼šä¿®æ”¹ä¸€æ¡ç¬”è®°ï¼Œ100 ä¸ª NoteItem éƒ½é‡æ–°æ¸²æŸ“
- **ä¼˜åŒ–å**ï¼šä¿®æ”¹ä¸€æ¡ç¬”è®°ï¼Œåªæœ‰ 1 ä¸ª NoteItem é‡æ–°æ¸²æŸ“

---

### 4. é˜²æŠ–ä¼˜åŒ–ï¼ˆDebounceï¼‰

#### å®æ—¶é¢„è§ˆä¼˜åŒ–

```jsx
import useDebounce from './hooks/useDebounce';

function MarkdownEditor({ value, onChange }) {
  // å¯¹è¾“å…¥å†…å®¹è¿›è¡Œé˜²æŠ–å¤„ç†
  const debouncedValue = useDebounce(value, 300);
  
  return (
    <>
      <textarea value={value} onChange={onChange} />
      <ReactMarkdown>{debouncedValue}</ReactMarkdown>
    </>
  );
}
```

#### æ•ˆæœå¯¹æ¯”

**ä¸ä½¿ç”¨é˜²æŠ–ï¼š**
```
ç”¨æˆ·è¾“å…¥ "H" â†’ æ¸²æŸ“ 1 æ¬¡
ç”¨æˆ·è¾“å…¥ "e" â†’ æ¸²æŸ“ 2 æ¬¡
ç”¨æˆ·è¾“å…¥ "l" â†’ æ¸²æŸ“ 3 æ¬¡
ç”¨æˆ·è¾“å…¥ "l" â†’ æ¸²æŸ“ 4 æ¬¡
ç”¨æˆ·è¾“å…¥ "o" â†’ æ¸²æŸ“ 5 æ¬¡
æ€»è®¡ï¼š5 æ¬¡æ¸²æŸ“
```

**ä½¿ç”¨é˜²æŠ–ï¼ˆ300msï¼‰ï¼š**
```
ç”¨æˆ·è¾“å…¥ "H" â†’ ç­‰å¾…
ç”¨æˆ·è¾“å…¥ "e" â†’ ç­‰å¾…
ç”¨æˆ·è¾“å…¥ "l" â†’ ç­‰å¾…
ç”¨æˆ·è¾“å…¥ "l" â†’ ç­‰å¾…
ç”¨æˆ·è¾“å…¥ "o" â†’ ç­‰å¾…
åœæ­¢è¾“å…¥ 300ms â†’ æ¸²æŸ“ 1 æ¬¡
æ€»è®¡ï¼š1 æ¬¡æ¸²æŸ“
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### 1. åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•åœºæ™¯ 1ï¼šåˆ›å»º Markdown ç¬”è®°

```markdown
**æµ‹è¯•æ­¥éª¤ï¼š**
1. ç‚¹å‡»"æ·»åŠ ç¬”è®°"æŒ‰é’®
2. è¾“å…¥æ ‡é¢˜ï¼š"æˆ‘çš„ç¬¬ä¸€æ¡ Markdown ç¬”è®°"
3. ç‚¹å‡»"Markdown"æ¨¡å¼
4. è¾“å…¥å†…å®¹ï¼š
   # æˆ‘çš„æ ‡é¢˜
   è¿™æ˜¯ä¸€æ®µ**ç²—ä½“**æ–‡å­—ã€‚
   
   - åˆ—è¡¨é¡¹ 1
   - åˆ—è¡¨é¡¹ 2
5. ç‚¹å‡»"åˆ†å±"æ¨¡å¼ï¼ŒæŸ¥çœ‹å®æ—¶é¢„è§ˆ
6. ç‚¹å‡»"æ·»åŠ ç¬”è®°"ä¿å­˜

**é¢„æœŸç»“æœï¼š**
- ç¬”è®°æˆåŠŸä¿å­˜
- ç¬”è®°åˆ—è¡¨æ˜¾ç¤ºæ–°ç¬”è®°
- ç¬”è®°å†…å®¹æŒ‰ Markdown æ ¼å¼æ˜¾ç¤º
- æ˜¾ç¤º"ğŸ¨ Markdown"å¾½ç« 
```

#### æµ‹è¯•åœºæ™¯ 2ï¼šç¼–è¾‘ Markdown ç¬”è®°

```markdown
**æµ‹è¯•æ­¥éª¤ï¼š**
1. ç‚¹å‡»æŸæ¡ Markdown ç¬”è®°çš„"ç¼–è¾‘"æŒ‰é’®
2. è‡ªåŠ¨åˆ‡æ¢åˆ° Markdown æ¨¡å¼
3. ä¿®æ”¹å†…å®¹
4. ç‚¹å‡»"ä¿å­˜ä¿®æ”¹"

**é¢„æœŸç»“æœï¼š**
- ç¬”è®°å†…å®¹æ›´æ–°
- Markdown æ ¼å¼ä¿æŒ
- æ˜¾ç¤ºæ›´æ–°æ—¶é—´
```

#### æµ‹è¯•åœºæ™¯ 3ï¼šæ¨¡å¼åˆ‡æ¢

```markdown
**æµ‹è¯•æ­¥éª¤ï¼š**
1. åˆ›å»ºçº¯æ–‡æœ¬ç¬”è®°
2. ç¼–è¾‘æ—¶åˆ‡æ¢åˆ° Markdown æ¨¡å¼
3. ä¿å­˜

**é¢„æœŸç»“æœï¼š**
- ç¬”è®°æ ¼å¼ä»çº¯æ–‡æœ¬å˜ä¸º Markdown
- å†…å®¹æ­£å¸¸æ˜¾ç¤º
```

---

### 2. æ€§èƒ½æµ‹è¯•

#### æµ‹è¯•åœºæ™¯ 4ï¼šé¦–å±åŠ è½½æ—¶é—´

```markdown
**æµ‹è¯•æ­¥éª¤ï¼š**
1. æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜
2. æ‰“å¼€å¼€å‘è€…å·¥å…· Network é¢æ¿
3. åˆ·æ–°é¡µé¢
4. è®°å½• DOMContentLoaded æ—¶é—´

**é¢„æœŸç»“æœï¼š**
- ä¸åº”ä¸‹è½½ react-markdown.chunk.js
- é¦–å±åŠ è½½æ—¶é—´ < 2 ç§’
```

#### æµ‹è¯•åœºæ™¯ 5ï¼šæ‡’åŠ è½½æ•ˆæœ

```markdown
**æµ‹è¯•æ­¥éª¤ï¼š**
1. æ‰“å¼€ Network é¢æ¿
2. ç‚¹å‡»"æ·»åŠ ç¬”è®°"
3. ç‚¹å‡»"Markdown"æ¨¡å¼
4. è§‚å¯Ÿç½‘ç»œè¯·æ±‚

**é¢„æœŸç»“æœï¼š**
- ç‚¹å‡» Markdown æ¨¡å¼æ—¶æ‰ä¸‹è½½ react-markdown.chunk.js
- ä¸‹è½½æ—¶æ˜¾ç¤º"â³ åŠ è½½é¢„è§ˆä¸­..."
- ä¸‹è½½å®Œæˆåæ˜¾ç¤º Markdown ç¼–è¾‘å™¨
```

---

### 3. å…¼å®¹æ€§æµ‹è¯•

#### æµ‹è¯•åœºæ™¯ 6ï¼šæµè§ˆå™¨å…¼å®¹æ€§

```markdown
**æµ‹è¯•æµè§ˆå™¨ï¼š**
- Chrome æœ€æ–°ç‰ˆ
- Firefox æœ€æ–°ç‰ˆ
- Safari æœ€æ–°ç‰ˆ
- Edge æœ€æ–°ç‰ˆ

**æµ‹è¯•å†…å®¹ï¼š**
- Markdown æ¸²æŸ“æ˜¯å¦æ­£å¸¸
- æ‡’åŠ è½½æ˜¯å¦æ­£å¸¸
- æ ·å¼æ˜¯å¦æ­£å¸¸
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä½¿ç”¨ lazy è€Œä¸æ˜¯æ™®é€š importï¼Ÿ

**A:** 
- **æ™®é€š import**ï¼šæ‰“åŒ…æ—¶ä¼šåŒ…å«åœ¨ä¸» bundle ä¸­ï¼Œå¢åŠ åˆå§‹åŠ è½½ä½“ç§¯
- **lazy**ï¼šå®ç°ä»£ç åˆ†å‰²ï¼ŒæŒ‰éœ€åŠ è½½ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´

### Q2: Suspense çš„ fallback å¯ä»¥ä¸å†™å—ï¼Ÿ

**A:** 
ä¸å¯ä»¥ã€‚å¦‚æœä¸å†™ fallbackï¼ŒReact ä¼šæŠ¥é”™ã€‚fallback å¿…é¡»æ˜¯ä¸€ä¸ª React å…ƒç´ ã€‚

```jsx
// âŒ é”™è¯¯
<Suspense>
  <ReactMarkdown />
</Suspense>

// âœ… æ­£ç¡®
<Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
  <ReactMarkdown />
</Suspense>
```

### Q3: ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å—æ§ç»„ä»¶ï¼Ÿ

**A:**
- **å®æ—¶éªŒè¯**ï¼šå¯ä»¥åœ¨è¾“å…¥æ—¶éªŒè¯å’Œé™åˆ¶
- **å®æ—¶åŒæ­¥**ï¼šå¤šä¸ªç»„ä»¶å¯ä»¥å…±äº«çŠ¶æ€
- **æ¡ä»¶æ¸²æŸ“**ï¼šå¯ä»¥æ ¹æ®è¾“å…¥åŠ¨æ€æ¸²æŸ“
- **çŠ¶æ€ç®¡ç†**ï¼šä¾¿äºä¿å­˜å’Œæ¢å¤çŠ¶æ€

### Q4: ReactMarkdown æ”¯æŒå“ªäº› Markdown è¯­æ³•ï¼Ÿ

**A:**
æ”¯æŒæ ‡å‡† Markdown è¯­æ³•ï¼š
- æ ‡é¢˜ï¼š`#`, `##`, `###`
- ç²—ä½“ï¼š`**text**`
- æ–œä½“ï¼š`*text*`
- ä»£ç ï¼š`` `code` ``
- ä»£ç å—ï¼š` ```code``` `
- é“¾æ¥ï¼š`[text](url)`
- å›¾ç‰‡ï¼š`![alt](url)`
- åˆ—è¡¨ï¼š`-`, `*`, `1.`
- å¼•ç”¨ï¼š`>`

### Q5: å¦‚ä½•è‡ªå®šä¹‰ Markdown æ ·å¼ï¼Ÿ

**A:**
ä½¿ç”¨ `components` å±æ€§ï¼š

```jsx
<ReactMarkdown
  components={{
    h1: ({ node, ...props }) => <h1 style={myStyle} {...props} />,
    code: ({ node, inline, ...props }) => 
      inline ? <code {...props} /> : <pre><code {...props} /></pre>,
  }}
>
  {content}
</ReactMarkdown>
```

### Q6: å¦‚ä½•å¤„ç† Markdown ä¸­çš„å›¾ç‰‡ï¼Ÿ

**A:**
å¯ä»¥è‡ªå®šä¹‰ img ç»„ä»¶ï¼š

```jsx
<ReactMarkdown
  components={{
    img: ({ node, ...props }) => (
      <img 
        style={{ maxWidth: '100%', height: 'auto' }} 
        {...props} 
      />
    ),
  }}
>
  {content}
</ReactMarkdown>
```

### Q7: å¦‚ä½•å®ç°è¯­æ³•é«˜äº®ï¼Ÿ

**A:**
å¯ä»¥é›†æˆ `react-syntax-highlighter`ï¼š

```bash
npm install react-syntax-highlighter
```

```jsx
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';

<ReactMarkdown
  components={{
    code: ({ node, inline, className, children, ...props }) => {
      const match = /language-(\w+)/.exec(className || '');
      return !inline && match ? (
        <SyntaxHighlighter language={match[1]} {...props}>
          {String(children).replace(/\n$/, '')}
        </SyntaxHighlighter>
      ) : (
        <code className={className} {...props}>
          {children}
        </code>
      );
    }
  }}
>
  {content}
</ReactMarkdown>
```

### Q8: Markdown ç¬”è®°å¯ä»¥å¯¼å‡ºå—ï¼Ÿ

**A:**
å¯ä»¥å®ç°å¯¼å‡ºåŠŸèƒ½ï¼š

```jsx
function exportMarkdown(note) {
  const blob = new Blob([note.content], { type: 'text/markdown' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `${note.title}.md`;
  a.click();
  URL.revokeObjectURL(url);
}
```

### Q9: ä¸ºä»€ä¹ˆæŒ‰é’®è¦åŠ  type="button"ï¼Ÿ

**A:**
åœ¨è¡¨å•å†…çš„ button å…ƒç´ ï¼Œé»˜è®¤ type æ˜¯ `"submit"`ï¼Œä¼šè§¦å‘è¡¨å•æäº¤ã€‚

```jsx
// âŒ é”™è¯¯ï¼šä¼šè§¦å‘è¡¨å•æäº¤
<form onSubmit={handleSubmit}>
  <button onClick={() => setMode('preview')}>é¢„è§ˆ</button>
</form>

// âœ… æ­£ç¡®ï¼šä¸ä¼šè§¦å‘è¡¨å•æäº¤
<form onSubmit={handleSubmit}>
  <button type="button" onClick={() => setMode('preview')}>é¢„è§ˆ</button>
</form>
```

**button çš„ä¸‰ç§ typeï¼š**
- `type="submit"`: æäº¤è¡¨å•ï¼ˆé»˜è®¤å€¼ï¼‰
- `type="button"`: æ™®é€šæŒ‰é’®ï¼Œä¸æäº¤è¡¨å•
- `type="reset"`: é‡ç½®è¡¨å•

**æœ€ä½³å®è·µï¼š**
- åœ¨è¡¨å•å†…çš„åŠŸèƒ½æ€§æŒ‰é’®ï¼ˆå¦‚åˆ‡æ¢æ¨¡å¼ã€åˆ é™¤æ ‡ç­¾ç­‰ï¼‰ä¸€å®šè¦åŠ  `type="button"`
- åªæœ‰çœŸæ­£éœ€è¦æäº¤è¡¨å•çš„æŒ‰é’®æ‰ç”¨ `type="submit"`

---

## ğŸ“š å‚è€ƒèµ„æ–™

### å®˜æ–¹æ–‡æ¡£

- [React å®˜æ–¹æ–‡æ¡£ - Suspense](https://react.dev/reference/react/Suspense)
- [React å®˜æ–¹æ–‡æ¡£ - lazy](https://react.dev/reference/react/lazy)
- [react-markdown å®˜æ–¹æ–‡æ¡£](https://github.com/remarkjs/react-markdown)

### ç›¸å…³æŠ€æœ¯

- [Markdown è¯­æ³•æŒ‡å—](https://www.markdownguide.org/)
- [ä»£ç åˆ†å‰² - webpack](https://webpack.js.org/guides/code-splitting/)
- [React æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit)

---

## ğŸ‰ æ€»ç»“

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæ‚¨å­¦ä¼šäº†ï¼š

1. âœ… **åŠ¨æ€å¯¼å…¥**ï¼šä½¿ç”¨ `lazy` å’Œ `import()` å®ç°ä»£ç åˆ†å‰²
2. âœ… **æ‡’åŠ è½½**ï¼šä½¿ç”¨ `Suspense` å¤„ç†åŠ è½½çŠ¶æ€
3. âœ… **å—æ§ç»„ä»¶**ï¼šç†è§£å•å‘æ•°æ®æµå’ŒçŠ¶æ€ç®¡ç†
4. âœ… **ç»„ä»¶é€šä¿¡**ï¼šæŒæ¡çˆ¶å­ç»„ä»¶é€šä¿¡æ¨¡å¼
5. âœ… **ç¬¬ä¸‰æ–¹åº“é›†æˆ**ï¼šé›†æˆ react-markdown å®ç° Markdown æ¸²æŸ“
6. âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€é˜²æŠ–ç­‰ä¼˜åŒ–æŠ€æœ¯
7. âœ… **å®æ—¶é¢„è§ˆ**ï¼šå®ç°ç¼–è¾‘å’Œé¢„è§ˆçš„åŒå‘ç»‘å®š

è¿™äº›æŠ€èƒ½ä¸ä»…é€‚ç”¨äº Markdown åŠŸèƒ½ï¼Œè¿˜å¯ä»¥åº”ç”¨åˆ°å…¶ä»–éœ€è¦æŒ‰éœ€åŠ è½½ã€å®æ—¶é¢„è§ˆçš„åœºæ™¯ä¸­ã€‚

---

**ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·éšæ—¶æé—®ã€‚** ğŸ˜Š

